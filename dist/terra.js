!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class n{constructor(t,e){this.width=t,this.height=e,this.entities={},this.components={},this.systems={},this.callbacks={},this.callbacks.onStart=[],this.callbacks.onUpdate=[]}start(t){this.callbacks.onStart.forEach(t=>{t.callback(t.system)}),t&&t(),window.requestAnimationFrame(this.update.bind(this))}update(t){this.onUpdate(t),this.callbacks.onUpdate.forEach(e=>{e.callback(e.system,t)}),window.requestAnimationFrame(this.update.bind(this))}onUpdate(t){}width(){return this.width}height(){return this.height}createEntities(t){for(let e=0;e<t.length;e++)this.addEntity(t[e])}createSystem(t){if(void 0===this.systems[t.id])return t.game=this,this.systems[t.id]=t,this.callbacks.onStart.push({system:t,callback:t.onStart}),this.callbacks.onUpdate.push({system:t,callback:t.onUpdate}),t}addEntity(t){void 0===this.entities[t.id]&&(this.entities[t.id]=t,t.game=this)}getEntity(t){if(void 0!==this.entities[t])return this.entities[t];throw`Cannot find Entity with id '${t}'`}getEntitiesWith(t){let e=[];for(let i=0;i<Object.keys(this.entities).length;i++){let n=this.entities[Object.keys(this.entities)[i]],s=0,o=t.length;for(let e=0;e<Object.keys(n.componentMap).length;e++){let i=Object.keys(n.componentMap)[e];t.find(t=>t==n.componentMap[i].id)&&s++}s==o&&e.push(n)}return e}getComponents(t){return this.components[t]}getSystem(t){return this.systems[t]}getComponentFromEntity(t,e){return this.getEntity(t).getComponent(e)}}class s{constructor(t,e,i){if(this.id=t,this.componentMap={},this.game=e,i)for(let t=0;t<i.length;t++)this.attachComponent(i[t])}attachComponent(t){if(void 0!==this.componentMap[t.id])throw`There is already a component with the ID '${t.id}'`;this.componentMap[t.id]=t,void 0===this.game.components[t.id]&&(this.game.components[t.id]=[]),this.game.components[t.id].push(t),t.onAttach(this)}getComponent(t){if(void 0!==this.componentMap[t])return this.componentMap[t];throw`Cannot find Component '${t}' on Entity '${this.id}'`}}class o{constructor(t,e){this.id=t,this.data=e,this.entity=null}onAttach(t){console.log(`Attached '${this.id}' to '${t.id}'`)}}class a{constructor(t,e,i){this.id=t,this.game=null,this.onStart=e,this.onUpdate=i}getEntity(t){null!==this.game&&this.game.getEntity(t)}getComponentFromEntity(t,e){if(this.game)return this.game.getEntity(t).getComponent(e)}}window.Terra=new class{constructor(){this.Game=n,this.Entity=s,this.Component=o,this.System=a}}}]);
//# sourceMappingURL=terra.js.map