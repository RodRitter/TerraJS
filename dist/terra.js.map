{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/core/component.js","webpack:///./src/core/entity.js","webpack:///./src/core/game.js","webpack:///./src/core/system.js","webpack:///./src/terra.js"],"names":["Component","constructor","id","data","entity","onAttach","console","log","Entity","game","components","componentMap","i","length","attachComponent","component","undefined","push","getComponent","Game","width","height","entities","systems","callbacks","onStart","onUpdate","start","callback","forEach","systemObj","system","window","requestAnimationFrame","update","bind","time","createEntities","addEntity","createSystem","getEntity","getEntitiesWith","Object","keys","count","target","j","key","result","find","c","getComponents","getComponentFromEntity","entityId","componentId","System","Terra"],"mappings":"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","file":"terra.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/terra.js\");\n","export class Component {\n    constructor(id, data) {\n        this.id = id;\n        this.data = data;\n        this.entity = null;\n    }\n\n    onAttach(entity) {\n        console.log(`Attached '${this.id}' to '${entity.id}'`);\n    }\n}","export class Entity {\n    constructor(id, game, components) {\n        this.id = id;\n        this.componentMap = {};\n        this.game = game;\n\n        for(let i=0; i<components.length; i++) {\n            this.attachComponent(components[i]);\n        }\n    }\n\n    attachComponent(component) {\n        if(this.componentMap[component.id] === undefined) {\n            this.componentMap[component.id] = component;\n\n            if(this.game.components[component.id] === undefined) {\n                this.game.components[component.id] = [];\n            } \n            this.game.components[component.id].push(component);\n            component.onAttach(this);\n            \n        } else {\n            throw(`There is already a component with the ID '${component.id}'`);\n        }\n    }\n\n    getComponent(id) {\n        if(this.componentMap[id] !== undefined) {\n            return this.componentMap[id];\n        }\n        throw(`Cannot find Component '${id}' on Entity '${this.id}'`);\n    }\n\n}","export class Game {\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n\n        this.entities = {};\n        this.components = {};\n        this.systems = {}; // Is this needed? Callbacks below\n\n        // System Callbacks\n        this.callbacks = {};\n        this.callbacks.onStart = [];\n        this.callbacks.onUpdate = [];\n    }\n\n    start(callback) {\n        // Run start callbacks\n        this.callbacks.onStart.forEach((systemObj) => {\n            systemObj.callback(systemObj.system);\n        });\n\n        if(callback) {\n            callback();\n        }\n\n        // Start game loop\n        window.requestAnimationFrame(this.update.bind(this));\n    }\n\n    update(time) {\n        this.onUpdate(time);\n\n        this.callbacks.onUpdate.forEach((systemObj) => {\n            systemObj.callback(systemObj.system, time);\n        });\n        \n        window.requestAnimationFrame(this.update.bind(this));\n    }\n\n    onUpdate(time) {\n        // Override\n    }\n\n    width() {\n        return this.width;\n    }\n\n    height() {\n        return this.height;\n    }\n\n    createEntities(entities) {\n        for(let i=0; i<entities.length; i++) {\n            this.addEntity(entities[i]);\n        }\n    }\n\n    createSystem(system) {\n        if(this.systems[system.id] === undefined) {\n            system.game = this;\n            this.systems[system.id] = system;\n            this.callbacks.onStart.push({system: system, callback: system.onStart});\n            this.callbacks.onUpdate.push({system: system, callback: system.onUpdate});\n            return system;\n        }\n    }\n\n    addEntity(entity) {\n        if(this.entities[entity.id] === undefined) {\n            this.entities[entity.id] = entity;\n            entity.game = this;\n        }\n    }\n\n    getEntity(id) {\n        if(this.entities[id] !== undefined) {\n            return this.entities[id];\n        }\n        throw(`Cannot find Entity with id '${id}'`);\n    }\n\n    getEntitiesWith(components) {\n        let entities = [];\n\n        for(let i=0; i<Object.keys(this.entities).length; i++) {\n            let entity = this.entities[Object.keys(this.entities)[i]];\n            let count = 0;\n            let target = components.length;\n            \n            for(let j=0; j<Object.keys(entity.componentMap).length; j++) {\n                let key = Object.keys(entity.componentMap)[j];\n                let result = components.find(c => c == entity.componentMap[key].id);\n                if(result) count++\n            }\n\n            if(count == target) {\n                entities.push(entity);\n            }\n        }\n        return entities;\n    }\n\n    getComponents(id) {\n        return this.components[id];\n    }\n\n    getComponentFromEntity(entityId, componentId) {\n        return this.getEntity(entityId).getComponent(componentId);\n    }\n}","export class System {\n    constructor(id, onStart, onUpdate) {\n        this.id = id;\n        this.game = null;\n        this.onStart = onStart;\n        this.onUpdate = onUpdate;\n    }\n\n    getEntity(id) {\n        if(this.game !== null) {\n            this.game.getEntity(id);\n        }\n    }\n\n    getComponentFromEntity(entityId, componentId) {\n        if(this.game) {\n            return this.game.getEntity(entityId).getComponent(componentId);\n        }\n    }\n}","import { Game } from './core/game.js';\nimport { Entity } from './core/entity.js';\nimport { Component } from './core/component.js';\nimport { System } from './core/system.js';\n\nclass Terra {\n    constructor() {\n        this.Game = Game;\n\n        // Base Classes\n        this.Entity = Entity;\n        this.Component = Component;\n        this.System = System;\n    }\n}\n\nwindow.Terra = new Terra();"],"sourceRoot":""}