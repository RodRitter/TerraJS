{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/core/entity.js","webpack:///./src/core/system.js","webpack:///./src/core/component.js","webpack:///./src/core/game.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/terra.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Entity","id","game","components","_classCallCheck","this","componentMap","length","attachComponent","component","undefined","push","onAttach","System","onStart","onUpdate","getEntity","entityId","componentId","getComponent","Component","data","entity","console","log","_entity","Game","width","height","entities","systems","callbacks","forEach","systemObj","callback","system","window","requestAnimationFrame","update","bind","time","addEntity","_this","_loop","keys","count","target","_loop2","j","key","find","g","Function","eval","e","_typeof","_game","_component","_system","global","Terra"],"mappings":"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","file":"terra.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","export class Entity {\n    constructor(id, game, components) {\n        this.id = id;\n        this.componentMap = {};\n        this.game = game;\n        \n        if(components) {\n            for(let i=0; i<components.length; i++) {\n                this.attachComponent(components[i]);\n            }\n        }\n    }\n\n    attachComponent(component) {\n        if(this.componentMap[component.id] === undefined) {\n            this.componentMap[component.id] = component;\n\n            if(this.game.components[component.id] === undefined) {\n                this.game.components[component.id] = [];\n            } \n            this.game.components[component.id].push(component);\n            component.onAttach(this);\n            \n        } else {\n            throw(`There is already a component with the ID '${component.id}'`);\n        }\n    }\n\n    getComponent(id) {\n        if(this.componentMap[id] !== undefined) {\n            return this.componentMap[id];\n        }\n        throw(`Cannot find Component '${id}' on Entity '${this.id}'`);\n    }\n\n}","export class System {\n    constructor(id, onStart, onUpdate) {\n        this.id = id;\n        this.game = null;\n        this.onStart = onStart;\n        this.onUpdate = onUpdate;\n    }\n\n    getEntity(id) {\n        if(this.game !== null) {\n            this.game.getEntity(id);\n        }\n    }\n\n    getComponentFromEntity(entityId, componentId) {\n        if(this.game) {\n            return this.game.getEntity(entityId).getComponent(componentId);\n        }\n    }\n}","export class Component {\n    constructor(id, data) {\n        this.id = id;\n        this.data = data;\n        this.entity = null;\n    }\n\n    onAttach(entity) {\n        console.log(`Attached '${this.id}' to '${entity.id}'`);\n    }\n}","import { Entity } from './entity.js';\n\nexport class Game {\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n\n        this.entities = {};\n        this.components = {};\n        this.systems = {}; // Is this needed? Callbacks below\n\n        // System Callbacks\n        this.callbacks = {};\n        this.callbacks.onStart = [];\n        this.callbacks.onUpdate = [];\n    }\n\n    start() {\n        // Run start callbacks\n        this.callbacks.onStart.forEach((systemObj) => {\n            systemObj.callback(systemObj.system);\n        });\n\n        this.onStart();\n\n        // Start game loop\n        window.requestAnimationFrame(this.update.bind(this));\n    }\n\n    update(time) {\n        this.onUpdate(time);\n\n        this.callbacks.onUpdate.forEach((systemObj) => {\n            systemObj.callback(systemObj.system, time);\n        });\n        \n        window.requestAnimationFrame(this.update.bind(this));\n    }\n\n    onUpdate(time) {\n        // Override\n    }\n\n    onStart() {\n        // Override\n    }\n\n    width() {\n        return this.width;\n    }\n\n    height() {\n        return this.height;\n    }\n\n    createEntities(entities) {\n        for(let i=0; i<entities.length; i++) {\n            if(entities[i] instanceof Entity) {\n                this.addEntity(entities[i]);\n            } else {\n                throw (`Trying to add an entity which is not of type 'Entity'`)\n            }\n        }\n    }\n\n    addEntity(entity) {\n        if(this.entities[entity.id] === undefined) {\n            this.entities[entity.id] = entity;\n            entity.game = this;\n        }\n    }\n\n    createSystem(system) {\n        if(this.systems[system.id] === undefined) {\n            system.game = this;\n            this.systems[system.id] = system;\n            this.callbacks.onStart.push({system: system, callback: system.onStart});\n            this.callbacks.onUpdate.push({system: system, callback: system.onUpdate});\n            return system;\n        }\n    }\n\n    getEntity(id) {\n        if(this.entities[id] !== undefined) {\n            return this.entities[id];\n        }\n        throw(`Cannot find Entity with id '${id}'`);\n    }\n\n    getEntitiesWith(components) {\n        let entities = [];\n\n        for(let i=0; i<Object.keys(this.entities).length; i++) {\n            let entity = this.entities[Object.keys(this.entities)[i]];\n            let count = 0;\n            let target = components.length;\n            \n            for(let j=0; j<Object.keys(entity.componentMap).length; j++) {\n                let key = Object.keys(entity.componentMap)[j];\n                let result = components.find(c => c == entity.componentMap[key].id);\n                if(result) count++\n            }\n\n            if(count == target) {\n                entities.push(entity);\n            }\n        }\n        return entities;\n    }\n\n    getComponents(id) {\n        return this.components[id];\n    }\n\n    getSystem(id) {\n        return this.systems[id];\n    }\n\n    getComponentFromEntity(entityId, componentId) {\n        return this.getEntity(entityId).getComponent(componentId);\n    }\n}","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","import { Game } from './core/game.js';\nimport { Entity } from './core/entity.js';\nimport { Component } from './core/component.js';\nimport { System } from './core/system.js';\n\nclass Terra {\n    constructor() {\n        this.Game = Game;\n\n        // Base Classes\n        this.Entity = Entity;\n        this.Component = Component;\n        this.System = System;\n    }\n}\n\nglobal.Terra = new Terra();"],"sourceRoot":""}