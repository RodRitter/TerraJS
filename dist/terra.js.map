{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/core/system.js","webpack:///./src/core/entity.js","webpack:///./src/core/component.js","webpack:///./src/core/game.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/terra.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","System","id","onStart","onUpdate","_classCallCheck","this","game","getEntity","entityId","componentId","getComponent","Entity","components","componentMap","length","attachComponent","component","undefined","push","onAttach","Component","data","entity","console","log","_entity","_system","Game","width","height","entities","systems","callbacks","forEach","systemObj","callback","system","window","requestAnimationFrame","update","bind","time","TypeError","addEntity","_this","_loop","keys","count","target","_loop2","j","key","find","g","Function","eval","e","_typeof","_game","_component","global","Terra"],"mappings":"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","file":"terra.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","export class System {\n    constructor(id, onStart, onUpdate) {\n        this.id = id;\n        this.game = null;\n        this.onStart = onStart;\n        this.onUpdate = onUpdate;\n    }\n\n    getEntity(id) {\n        if(this.game !== null) {\n            this.game.getEntity(id);\n        }\n    }\n\n    getComponentFromEntity(entityId, componentId) {\n        if(this.game) {\n            return this.game.getEntity(entityId).getComponent(componentId);\n        }\n    }\n}","export class Entity {\n    constructor(id, game, components) {\n        this.id = id;\n        this.componentMap = {};\n        this.game = game;\n        \n        if(components) {\n            for(let i=0; i<components.length; i++) {\n                this.attachComponent(components[i]);\n            }\n        }\n    }\n\n    attachComponent(component) {\n        if(this.componentMap[component.id] === undefined) {\n            this.componentMap[component.id] = component;\n\n            if(this.game.components[component.id] === undefined) {\n                this.game.components[component.id] = [];\n            } \n            this.game.components[component.id].push(component);\n            component.onAttach(this);\n            \n        } else {\n            throw(`There is already a component with the ID '${component.id}'`);\n        }\n    }\n\n    getComponent(id) {\n        if(this.componentMap[id] !== undefined) {\n            return this.componentMap[id];\n        }\n        throw(`Cannot find Component '${id}' on Entity '${this.id}'`);\n    }\n\n}","export class Component {\n    constructor(id, data) {\n        this.id = id;\n        this.data = data;\n        this.entity = null;\n    }\n\n    onAttach(entity) {\n        console.log(`Attached '${this.id}' to '${entity.id}'`);\n    }\n}","import { Entity } from './entity.js';\nimport { System } from './system.js';\n\nexport class Game {\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n\n        this.entities = {};\n        this.components = {};\n        this.systems = {}; // Is this needed? Callbacks below\n\n        // System Callbacks\n        this.callbacks = {};\n        this.callbacks.onStart = [];\n        this.callbacks.onUpdate = [];\n    }\n\n    start() {\n        // Run start callbacks\n        this.callbacks.onStart.forEach((systemObj) => {\n            systemObj.callback(systemObj.system);\n        });\n\n        this.onStart();\n\n        // Start game loop\n        window.requestAnimationFrame(this.update.bind(this));\n    }\n\n    update(time) {\n        this.onUpdate(time);\n\n        this.callbacks.onUpdate.forEach((systemObj) => {\n            systemObj.callback(systemObj.system, time);\n        });\n        \n        window.requestAnimationFrame(this.update.bind(this));\n    }\n\n    onUpdate(time) {\n        // Override\n    }\n\n    onStart() {\n        // Override\n    }\n\n    createEntities(entities) {\n        for(let i=0; i<entities.length; i++) {\n            if(entities[i] instanceof Entity) {\n                this.addEntity(entities[i]);\n            } else {\n                throw new TypeError(`Trying to add an entity which is not of type 'Entity'`);\n            }\n        }\n    }\n\n    addEntity(entity) {\n        if(this.entities[entity.id] === undefined) {\n            this.entities[entity.id] = entity;\n            entity.game = this;\n        }\n    }\n\n    addSystem(system) {\n        if(this.systems[system.id] === undefined && system instanceof System) {\n            system.game = this;\n            this.systems[system.id] = system;\n            this.callbacks.onStart.push({system: system, callback: system.onStart});\n            this.callbacks.onUpdate.push({system: system, callback: system.onUpdate});\n            return system;\n        } else {\n            throw(new TypeError(`Trying to add system which is not type of 'System'`));\n        }\n    }\n\n    getEntity(id) {\n        if(this.entities[id] !== undefined) {\n            return this.entities[id];\n        }\n        throw(`Cannot find Entity with id '${id}'`);\n    }\n\n    getEntitiesWith(components) {\n        let entities = [];\n\n        for(let i=0; i<Object.keys(this.entities).length; i++) {\n            let entity = this.entities[Object.keys(this.entities)[i]];\n            let count = 0;\n            let target = components.length;\n            \n            for(let j=0; j<Object.keys(entity.componentMap).length; j++) {\n                let key = Object.keys(entity.componentMap)[j];\n                let result = components.find(c => c == entity.componentMap[key].id);\n                if(result) count++\n            }\n\n            if(count == target) {\n                entities.push(entity);\n            }\n        }\n        return entities;\n    }\n\n    getComponents(id) {\n        return this.components[id];\n    }\n\n    getSystem(id) {\n        return this.systems[id];\n    }\n\n    getComponentFromEntity(entityId, componentId) {\n        return this.getEntity(entityId).getComponent(componentId);\n    }\n}","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","import { Game } from './core/game.js';\nimport { Entity } from './core/entity.js';\nimport { Component } from './core/component.js';\nimport { System } from './core/system.js';\n\nclass Terra {\n    constructor() {\n        this.Game = Game;\n\n        // Base Classes\n        this.Entity = Entity;\n        this.Component = Component;\n        this.System = System;\n    }\n}\n\nglobal.Terra = new Terra();"],"sourceRoot":""}