{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/core/game.js","webpack:///./src/core/entity.js","webpack:///./src/core/component.js","webpack:///./src/core/system.js","webpack:///./src/terra.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Game","constructor","width","height","this","entities","components","systems","callbacks","onStart","onUpdate","start","forEach","systemObj","callback","system","window","requestAnimationFrame","update","bind","time","createEntities","length","addEntity","createSystem","undefined","id","game","push","entity","getEntity","getEntitiesWith","keys","count","target","j","componentMap","key","find","getComponents","getSystem","getComponentFromEntity","entityId","componentId","getComponent","Entity","attachComponent","component","onAttach","Component","data","console","log","System","Terra"],"mappings":"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","file":"terra.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export class Game {\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n\n        this.entities = {};\n        this.components = {};\n        this.systems = {}; // Is this needed? Callbacks below\n\n        // System Callbacks\n        this.callbacks = {};\n        this.callbacks.onStart = [];\n        this.callbacks.onUpdate = [];\n    }\n\n    start() {\n        // Run start callbacks\n        this.callbacks.onStart.forEach((systemObj) => {\n            systemObj.callback(systemObj.system);\n        });\n\n        this.onStart();\n\n        // Start game loop\n        window.requestAnimationFrame(this.update.bind(this));\n    }\n\n    update(time) {\n        this.onUpdate(time);\n\n        this.callbacks.onUpdate.forEach((systemObj) => {\n            systemObj.callback(systemObj.system, time);\n        });\n        \n        window.requestAnimationFrame(this.update.bind(this));\n    }\n\n    onUpdate(time) {\n        // Override\n    }\n\n    onStart() {\n        // Override\n    }\n\n    width() {\n        return this.width;\n    }\n\n    height() {\n        return this.height;\n    }\n\n    createEntities(entities) {\n        for(let i=0; i<entities.length; i++) {\n            this.addEntity(entities[i]);\n        }\n    }\n\n    createSystem(system) {\n        if(this.systems[system.id] === undefined) {\n            system.game = this;\n            this.systems[system.id] = system;\n            this.callbacks.onStart.push({system: system, callback: system.onStart});\n            this.callbacks.onUpdate.push({system: system, callback: system.onUpdate});\n            return system;\n        }\n    }\n\n    addEntity(entity) {\n        if(this.entities[entity.id] === undefined) {\n            this.entities[entity.id] = entity;\n            entity.game = this;\n        }\n    }\n\n    getEntity(id) {\n        if(this.entities[id] !== undefined) {\n            return this.entities[id];\n        }\n        throw(`Cannot find Entity with id '${id}'`);\n    }\n\n    getEntitiesWith(components) {\n        let entities = [];\n\n        for(let i=0; i<Object.keys(this.entities).length; i++) {\n            let entity = this.entities[Object.keys(this.entities)[i]];\n            let count = 0;\n            let target = components.length;\n            \n            for(let j=0; j<Object.keys(entity.componentMap).length; j++) {\n                let key = Object.keys(entity.componentMap)[j];\n                let result = components.find(c => c == entity.componentMap[key].id);\n                if(result) count++\n            }\n\n            if(count == target) {\n                entities.push(entity);\n            }\n        }\n        return entities;\n    }\n\n    getComponents(id) {\n        return this.components[id];\n    }\n\n    getSystem(id) {\n        return this.systems[id];\n    }\n\n    getComponentFromEntity(entityId, componentId) {\n        return this.getEntity(entityId).getComponent(componentId);\n    }\n}","export class Entity {\n    constructor(id, game, components) {\n        this.id = id;\n        this.componentMap = {};\n        this.game = game;\n        \n        if(components) {\n            for(let i=0; i<components.length; i++) {\n                this.attachComponent(components[i]);\n            }\n        }\n    }\n\n    attachComponent(component) {\n        if(this.componentMap[component.id] === undefined) {\n            this.componentMap[component.id] = component;\n\n            if(this.game.components[component.id] === undefined) {\n                this.game.components[component.id] = [];\n            } \n            this.game.components[component.id].push(component);\n            component.onAttach(this);\n            \n        } else {\n            throw(`There is already a component with the ID '${component.id}'`);\n        }\n    }\n\n    getComponent(id) {\n        if(this.componentMap[id] !== undefined) {\n            return this.componentMap[id];\n        }\n        throw(`Cannot find Component '${id}' on Entity '${this.id}'`);\n    }\n\n}","export class Component {\n    constructor(id, data) {\n        this.id = id;\n        this.data = data;\n        this.entity = null;\n    }\n\n    onAttach(entity) {\n        console.log(`Attached '${this.id}' to '${entity.id}'`);\n    }\n}","export class System {\n    constructor(id, onStart, onUpdate) {\n        this.id = id;\n        this.game = null;\n        this.onStart = onStart;\n        this.onUpdate = onUpdate;\n    }\n\n    getEntity(id) {\n        if(this.game !== null) {\n            this.game.getEntity(id);\n        }\n    }\n\n    getComponentFromEntity(entityId, componentId) {\n        if(this.game) {\n            return this.game.getEntity(entityId).getComponent(componentId);\n        }\n    }\n}","import { Game } from './core/game.js';\nimport { Entity } from './core/entity.js';\nimport { Component } from './core/component.js';\nimport { System } from './core/system.js';\n\nclass Terra {\n    constructor() {\n        this.Game = Game;\n\n        // Base Classes\n        this.Entity = Entity;\n        this.Component = Component;\n        this.System = System;\n    }\n}\n\nwindow.Terra = new Terra();"],"sourceRoot":""}